# Git Merge

[https://git-scm.com/docs/git-merge](https://git-scm.com/docs/git-merge)

---

## ✅ What is `git merge`?

`git merge` is a **Git command used to combine changes** from one branch into another. It's typically used to **integrate feature branches** into the main branches (`main`, `master`, or `develop`).

For example:

```bash
git checkout main
git merge feature-branch

```

This command merges the changes from `feature-branch` into `main`.

---

## 🔁 How Git Merge Works (Under the Hood)

1. **Common Ancestor (Merge Base):**
    
    Git first finds the *common ancestor* of the two branches. This is the commit where the branches diverged.
    
2. **3-Way Merge:**
    
    Git performs a **three-way merge** using:
    
    - The **merge base**,
    - The **HEAD** (current branch),
    - The **branch you are merging**.
3. **Merge Commit (if needed):**
    - If there are changes on both branches, Git creates a new **merge commit**.
    - This commit has **two parents**, representing the two branches.

---

## 🔀 Types of Merges

### 1. **Fast-forward Merge**

Occurs when the target branch has not diverged. Git simply moves the branch pointer forward.

```bash
git checkout main
git merge feature-branch  # If main is behind, it fast-forwards.

```

- ✅ Clean history
- ❌ Doesn’t show merge explicitly

### 2. **Recursive Merge (3-way)**

Used when branches have diverged. Git creates a merge commit.

```bash
git merge feature-branch

```

- ✅ Preserves history
- ✅ Shows clearly when branches were merged
- ❌ Can lead to a cluttered history

---

## ⚠️ Merge Conflicts

### When They Happen:

Conflicts occur when **both branches modified the same part of the same file**.

### Git’s Behavior:

- Git **pauses the merge** and asks you to **resolve conflicts manually**.
- Conflicted files are marked like:

```
<<<<<<< HEAD
your branch's changes
=======
other branch's changes
>>>>>>> feature-branch

```

### How to Resolve:

1. Open the file and resolve manually.
2. Mark it as resolved:

```bash
git add conflicted_file

```

1. Continue the merge:

```bash
git commit  # if it was paused

```

---

## 📘 Example: Merging a Feature Branch into Main

```bash
# Step 1: Ensure you're on the target branch
git checkout main

# Step 2: Merge the feature branch
git merge feature-1

# Step 3: If there are conflicts, resolve them and commit

```

---

## 🛠 Common Merge Strategies

You can specify merge strategies with `--strategy`:

```bash
git merge --strategy=recursive other-branch

```

Some strategies:

- `recursive` (default)
- `resolve`
- `ours`
- `theirs`
- `octopus` (for merging more than 2 branches)

---

## 🧪 Useful Options

- `-no-ff`: Forces a merge commit even if it could be fast-forwarded.

```bash
git merge --no-ff feature-1

```

- `-abort`: Abort a merge in progress (if it fails or you change your mind).

```bash
git merge --abort

```

- `-squash`: Combine all changes from a branch into one commit (not a true merge).

```bash
git merge --squash feature-1

```

---

## 🧭 Best Practices

1. **Always pull the latest changes** before merging.
2. **Use feature branches** for individual tasks.
3. Use `-no-ff` to retain a **clear merge history**.
4. Always **test after a merge**.
5. For large teams, consider **rebasing** before merging to keep history cleaner.

---

## 🆚 `merge` vs `rebase`

| Aspect | `merge` | `rebase` |
| --- | --- | --- |
| History | Preserves branch history | Rewrites history |
| Commit Graph | Shows all branches clearly | Linear, cleaner graph |
| Conflict Handling | During merge | During rebase |
| Use Case | Team collaboration, record merges | Clean history, private branches |

---

## ✅ Summary

| Command | Description |
| --- | --- |
| `git merge branch` | Merge `branch` into current branch |
| `--no-ff` | Force a merge commit even if not needed |
| `--abort` | Cancel an in-progress merge |
| `--squash` | Combine changes without preserving history |

---